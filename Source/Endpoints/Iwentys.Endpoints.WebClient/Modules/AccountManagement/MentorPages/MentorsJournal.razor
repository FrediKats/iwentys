@page "/account-management/mentors/"
@attribute [Authorize]
@using Bunit.Extensions
@inherits Iwentys.Endpoints.WebClient.Shared.DependencyInjectionPage


<MudContainer>
    <MudGrid>
        <MudContainer Class="card-list-element dark-elevation-01 p-3 m-3">
            <MudCheckBox @bind-Checked="ShowOnlyMySubjects">Show only my subjects</MudCheckBox>
        </MudContainer>
    </MudGrid>
    @if (!_subjectsMentorsToShow.IsNullOrEmpty())
    {
        @foreach (var subjectMentors in _subjectsMentorsToShow)
        {
            <MudGrid>
                <MudContainer Class="card-list-element dark-elevation-01 p-3 m-3">
                    <MudText Typo="Typo.h4">@subjectMentors.Name</MudText>
                    <MudExpansionPanels MultiExpansion="true" Elevation="0">
                        @foreach (var groupMentors in subjectMentors.Groups)
                        {
                            <MudExpansionPanel Text="@groupMentors.Name">
                                @if (_currentUser.IsAdmin)
                                {
                                    <MudText><MudChip Color="Color.Primary">Lector</MudChip> @groupMentors.LectorMentor.FirstName @groupMentors.LectorMentor.SecondName </MudText>
                                }
                                else
                                {
                                    <MudText><MudChip>Lector</MudChip> @groupMentors.LectorMentor.FirstName @groupMentors.LectorMentor.SecondName </MudText>
                                }

                                @foreach (var practiceMentor in groupMentors.PracticeMentors)
                                {
                                    @if (_currentUser.IsAdmin)
                                    {
                                        <MudText><MudChip Color="Color.Secondary" OnClose="RemoveMentor">Practice</MudChip> @practiceMentor.FirstName @practiceMentor.SecondName</MudText>
                                    }
                                    else
                                    {
                                        <MudText><MudChip Color="Color.Secondary">Practice</MudChip> @practiceMentor.FirstName @practiceMentor.SecondName</MudText>
                                    }
                                }
                            </MudExpansionPanel>
                        }
                    </MudExpansionPanels>
                </MudContainer>
            </MudGrid>
        }
    }
</MudContainer>
