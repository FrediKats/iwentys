@page "/leaderboard/study/"
@using Iwentys.Sdk
@using Iwentys.Endpoints.Sdk.Extensions

@inherits Iwentys.Endpoints.WebClient.Shared.DependencyInjectionPage

@code {
    private async Task Callback(object obj)
    {
        await OnCurseSelected(obj as StudyCourseInfoDto);
    }

    private async Task Callback2(object obj)
    {
        await OnGroupSelect(obj as GroupProfileResponseDto);
    }

}

<div class="text-center">
    <h3>Рейтинг студентов</h3>

    <div class="container-fluid d-flex flex-row">
        <div class="container-fluid d-flex flex-column">
            @if (_studentProfiles is not null)
            {
                @foreach (StudyLeaderboardRowDto studentProfile in _studentProfiles)
                {
                    <a href=@LinkToProfile(studentProfile)>
                        <div class="d-flex flex-row dark-elevation-01 student-rating-row justify-content-center">
                            <div class="col-md-2">
                                <img src=@studentProfile.Student.AvatarUrl class="student-logo" />
                            </div>

                            <div class="col-md-8">
                                <h4>@studentProfile.Student.GetFullName()</h4>
                            </div>

                            <div class="col-md-2">
                                <p>@studentProfile.Activity.ToString("F2")</p>
                            </div>
                        </div>
                    </a>
                }
            }
        </div>

        <div class="container-fluid d-flex flex-column">
            @if (_studyCourses is not null)
            {
                <p>
                    @*<MudSelect Class="input-element" FullWidth="true" ValueChanged="Callback">*@
                    <MudSelect Class="input-element" @bind-Value="_selectedCourse">
                        @foreach (StudyCourseInfoDto item in _studyCourses)
                        {
                            <MudSelectItem Value="@item.CourseTitle"></MudSelectItem>
                        }
                    </MudSelect>
                </p>
            }

            @if (_groups is not null)
            {
                <p>
                    <MudSelect Class="input-element" @bind-Value="_selectedGroup">
                        @foreach (GroupProfileResponseDto item in _groups)
                        {
                            <MudSelectItem Value="@item">@item.GroupName</MudSelectItem>
                        }
                    </MudSelect>
                </p>
            }
        </div>
    </div>

</div>
